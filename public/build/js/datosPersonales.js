!function(){const e=document.querySelector("#nacionalidad"),t=document.querySelector("#cedula"),a=document.querySelector("#nombre1"),o=document.querySelector("#nombre2"),n=document.querySelector("#apellido1"),r=document.querySelector("#apellido2"),l=document.querySelector("#telefono"),d=document.querySelector("#datos-personales"),i={nacionalidad:e.value??"",cedula:t.value??"",nombre1:a.value??"",nombre2:o.value??"",apellido1:n.value??"",apellido2:r.value??"",telefono:l.value??""};function s(e){if("nacionalidad"!==e.target.id&&"pnf"!==e.target.id||(i[e.target.id]=e.target.value),"nombre1"===e.target.id||"apellido1"===e.target.id||"apellido2"===e.target.id||"nombre2"===e.target.id){const t=e.which?e.which:e.keyCode;(t<65||t>90)&&(i[e.target.id]=e.target.value,(t<97||t>122)&&(i[e.target.id]=e.target.value,8===t?i[e.target.id]=e.target.value:e.preventDefault())),i[e.target.id]=e.target.value}if("cedula"===e.target.id||"telefono"===e.target.id){const t=e.which?e.which:e.keyCode;(t<48||t>57)&&(8===t?(e.target.value=e.target.value,i[e.target.id]=e.target.value):e.preventDefault(),e.target.value=e.target.value,i[e.target.id]=e.target.value)}}e.addEventListener("change",s),a.addEventListener("keypress",s),o.addEventListener("keypress",s),n.addEventListener("keypress",s),r.addEventListener("keypress",s),t.addEventListener("keypress",s),l.addEventListener("keypress",s),t.addEventListener("keypress",s),d.addEventListener("submit",e=>{const t=document.querySelector(".campos-faltantes");t&&t.classList.remove("campos-faltantes"),e.preventDefault();const a=document.getElementById("datos-personales").elements;Array.prototype.forEach.call(a,(function(e){"submit"!==e.type&&"pnf"!==e.name&&(i[e.id]=e.value.trim().toLowerCase())})),function(){document.querySelectorAll(".campo small").forEach(e=>{e&&e.remove()});const e={nombre1:3,apellido1:3,cedula:8,telefono:11};document.querySelectorAll(".campo input").forEach(t=>{const a=t.getAttribute("name");if(t.value.length<e[a]&&"nombre2"!==t.name&&"apellido2"!==t.name){t.classList.add("campos-faltantes");const o=document.createElement("SMALL");return o.style="color: red",o.textContent=`Debe contener una longitud minima de ${e[a]} caracteres`,void t.parentNode.appendChild(o)}t.classList.remove("campos-faltantes")})}();const o=function(){const e=document.querySelector("#datos-personales").getElementsByTagName("input"),t=[];for(let a=0;a<e.length;a++)""===e[a].value.trim()&&"nombre2"!==e[a].name&&"apellido2"!==e[a].name&&t.push(e[a].name);return t}();if(o.length>0)return o.forEach(e=>{document.querySelector("#"+e).classList.add("campos-faltantes")}),void iziToast.error({title:"Error",message:"Debe de llenar los campos que contengan el (*)",position:"topCenter",displayMode:1});i.apellido1.length>=3&&i.nombre1.length>=3&&i.cedula.length>=8&&i.telefono.length>=11&&async function(){const{nacionalidad:e,cedula:t,nombre1:a,nombre2:o,apellido1:n,apellido2:r,telefono:l}=i,d=new FormData,s=document.querySelector('#datos-personales input[type="submit"]');d.append("nombres",o?`${a} ${o}`:""+a),d.append("apellidos",r?`${n} ${r}`:""+n),d.append("telefono",l),d.append("nacionalidad",e),d.append("cedula",t),s.setAttribute("value","Enviando..."),s.disabled=!0;try{const e=window.location.origin+"/api/datos-personales",t=await fetch(e,{method:"POST",body:d}),a=await t.json();a.resultado&&Swal.fire({icon:"success",title:"Datos Actualizados!",text:"Datos Actualizados Correctamente!",button:"OK!"}).then(()=>{a.primeraVez?setTimeout(()=>{window.location.replace("/estudiante/dashboard")},200):setTimeout(()=>{s.setAttribute("value","Listo")},500)})}catch(e){Swal.fire({icon:"error",title:"Error",text:"Opps, Ha ocurrido un error, vuelva a intentarlo!"}),s.setAttribute("value","Enviar"),s.disabled=!1}}()})}();