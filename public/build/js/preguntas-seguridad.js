!function(){const e=document.querySelector("#formulario"),t=document.querySelector("#pregunta1"),a=document.querySelector("#pregunta2");function r(e){o[e.target.id]=e.target.value.trim()}t.addEventListener("change",r),a.addEventListener("change",r);const o={pregunta1:"",pregunta2:"",respuesta1:"",respuesta2:""};e.addEventListener("submit",e=>{const t=document.querySelector(".campos-faltantes");t&&t.classList.remove("campos-faltantes"),e.preventDefault();const a=document.querySelector("#formulario").elements;Array.prototype.forEach.call(a,e=>{"submit"!==e.type&&(o[e.name]=e.value.trim())}),function(){document.querySelectorAll(".campo small").forEach(e=>{e&&e.remove()});const e={respuesta1:3,respuesta2:3};document.querySelectorAll(".campo input").forEach(t=>{const a=t.getAttribute("name");if(t.value.length<e[a]){t.classList.add("campos-faltantes");const r=document.createElement("SMALL");return r.style="color: red",r.textContent=`Debe contener una longitud minima de ${e[a]} caracteres`,void t.parentNode.appendChild(r)}t.classList.remove("campos-faltantes")})}();const r=function(){const e=document.querySelector("#formulario").getElementsByTagName("input"),t=[];for(let a=0;a<e.length;a++)""===e[a].value.trim()&&t.push(e[a].name);return t}();if(r.length>0)return r.forEach(e=>{document.querySelector("#"+e).classList.add("campos-faltantes")}),void iziToast.error({title:"Error",message:"Todos los campos son obligatorios",position:"topCenter",displayMode:1});o.respuesta1.length>=3&&o.respuesta2.length>=3&&async function(){const{pregunta1:e,pregunta2:t,respuesta1:a,respuesta2:r}=o,n=new FormData,s=document.querySelector('#formulario input[type="submit"]');if(n.append("pregunta1",e),n.append("respuesta1",a),n.append("pregunta2",t),n.append("respuesta2",r),e===t)return void iziToast.warning({title:"Deben de ser preguntas diferentes",position:"topCenter",displayMode:1});s.setAttribute("value","Enviando...");try{const e=window.location.origin+"/api/guardar-preguntas",t=await fetch(e,{body:n,method:"POST"});(await t.json()).resultado&&(s.disabled=!0,s.classList.add("btn-disabled"),Swal.fire({icon:"success",title:"Datos Actualizados!",text:"Datos Actualizados Correctamente!",button:"OK!"}).then(()=>{setTimeout(()=>{document.querySelector("#formulario").reset(),s.classList.remove("btn-disabled"),s.disabled=!1,s.setAttribute("value","Actualizar");const e=document.querySelector(".campos-faltantes");e&&e.classList.remove("campos-faltantes")},500)}))}catch(e){Swal.fire({icon:"error",title:"Error",text:"Opps, Ha ocurrido un error, vuelva a intentarlo!"}),s.setAttribute("value","Enviar"),s.disabled=!1}}()})}();