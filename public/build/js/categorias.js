!function(){const e=document.querySelector("#idCategoria"),t=document.querySelector("#input-editar"),o=document.querySelector("#btnGuardar"),a=document.querySelector("#btnEditar"),i=document.querySelector("#input-crear"),r=document.querySelectorAll(".modal-editar"),n=document.querySelectorAll(".eliminar-categoria"),c=document.querySelector(".tabla-categorias");let d="";i.addEventListener("input",e=>{e.target.value.length<5?o.disabled=!0:o.disabled=!1}),o.addEventListener("click",()=>{i.value.length<5?iziToast.error({title:"El campo no puede ir vacio y debe tener al menos 5 carecteres!",position:"topCenter",displayMode:1}):async function(){const e=document.querySelector("#input-crear").value.toLowerCase().trim(),t=new FormData;t.append("categoria",e);try{const e=window.location.origin+"/api/crear-categoria",a=await fetch(e,{method:"POST",body:t}),i=await a.json();if(o.disabled=!0,"existe"===i.resultado)return iziToast.warning({title:"Ya se encuentra registrado la categoria!",position:"topCenter",displayMode:1}),void setTimeout(()=>{o.disabled=!1},3e3);"exito"===i.resultado&&(iziToast.success({title:"Categoria ingresada con exito!",position:"topCenter",timeout:1500,displayMode:1}),$("#categorias").modal("hide")),setTimeout(()=>{window.location.reload()},2e3)}catch(e){console.log(e)}}()}),a.addEventListener("click",()=>{t.value.length<5?iziToast.error({title:"El campo no puede ir vacio y debe tener al menos 5 carecteres!",position:"topCenter",displayMode:1}):async function(e,t){const o=d,i=new FormData;i.append("nombre",e),i.append("id",t),a.disabled=!0;try{const e=window.location.origin+"/api/editar-categoria",t=await fetch(e,{method:"POST",body:i}),r=await t.json();"exito"===r.resultado&&(iziToast.success({title:"Categoria Actualizado!",position:"topCenter",displayMode:1}),$("#categorias-editar").modal("hide"),o.textContent=r.categoria,setTimeout(()=>{a.disabled=!1},3e3))}catch(e){console.log(e)}}(t.value,e.value)}),r.forEach(o=>{o.addEventListener("click",a=>{d=o.closest("tr").querySelector("td:nth-child(2)"),t.value=d.textContent,e.value=a.target.dataset.id})}),n.forEach(e=>{e.addEventListener("click",()=>{Swal.fire({title:"¿Estas Seguro?",text:"¿Estas seguro que quieres eliminar este dato?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si!",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&async function(e,t){fila=t;const o=new FormData;o.append("id",e);try{const e=window.location.origin+"/api/eliminar-categoria",t=await fetch(e,{method:"POST",body:o});"exito"===(await t.json()).resultado&&(Swal.fire({title:"Borrado!",text:"Data Eliminado.",icon:"success"}),c.removeChild(fila))}catch(e){iziToast.error({title:"Opps",message:"Ha ocurrido un error!"})}}(e.dataset.id,e.closest("tr"))})})})}();