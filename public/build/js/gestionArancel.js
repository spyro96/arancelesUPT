!function(){const e=document.querySelector("#formulario-arancel"),t=document.querySelector("#tabla-arancel");if(e){const t=document.querySelector("#crear"),o=document.querySelector("#actualizar"),r=document.querySelector("#arancel"),i=document.querySelector("#precio"),n=document.querySelector("#categoria"),c=document.querySelector("#tipo"),s=document.querySelector("#estatus"),l={arancel:r.value?r.value:"",precio:i.value?i.value:"",categoria:n.value?n.value:"",tipo:c.value?c.value:"",estatus:s.value?s.value:1};function a(e){l[e.target.id]=e.target.value.trim(),!Object.values(l).includes("")&&l.arancel.length>5?o?o.disabled=!1:t.disabled=!1:o?o.disabled=!0:t.disabled=!0}o&&Object.values(l).includes("")&&(o.disabled=!0),r.addEventListener("input",a),i.addEventListener("input",a),n.addEventListener("change",a),c.addEventListener("change",a),s.addEventListener("change",a),e.addEventListener("submit",e=>{e.preventDefault(),t?async function(e){const{arancel:a,precio:o,categoria:r,tipo:i,estatus:n}=e,c=new FormData;c.append("nombre",a),c.append("precio",o),c.append("categoria",r),c.append("tipo",i),c.append("estatus",n);try{const e=window.location.origin+"/api/crear-arancel",a=await fetch(e,{method:"POST",body:c});t.value="Enviando...",t.disabled=!0;const o=await a.json();if("existe"===o.resultado)return iziToast.warning({title:"Ya Existe!",message:"El arancel ya se encuentra registrado!",position:"topRight"}),void setTimeout(()=>{t.value="Crear",t.disabled=!1},1e3);"exito"===o.resultado&&(Swal.fire({position:"center",icon:"success",title:"Arancel registrado correctamente!",showConfirmButton:!1,timer:2e3}),setTimeout(()=>{document.querySelector("#formulario-arancel").reset(),t.value="Crear",Object.keys(l).forEach(e=>{"estatus"!==e&&(l[e]="")})},1e3))}catch(e){iziToast.error({title:"Oppsss!",message:"Ha ocurrido un error inesperado, vuelva a intentarlo!",position:"topRight",displayMode:1}),setTimeout(()=>{document.querySelector("#formulario-arancel").reset(),t.value="Crear",t.disabled=!1},1e3)}}(l):async function(e){const{arancel:t,precio:a,categoria:r,tipo:i,estatus:n}=e,c=document.querySelector("#idArancel").value,s=new FormData;s.append("id",c),s.append("nombre",t),s.append("precio",a),s.append("categoria",r),s.append("tipo",i),s.append("estatus",n);try{const e=window.location.origin+"/api/actualizar-arancel",t=await fetch(e,{method:"POST",body:s});o.disabled=!0,o.value="Enviando...";"exito"===(await t.json()).resultado&&(iziToast.success({title:"Exito!",message:"Arancel actualizado correctamente!",position:"topRight",timeout:1500}),setTimeout(()=>{window.location.replace("/admin/aranceles")},1500))}catch(e){iziToast.error({title:"Oppsss!",message:"Ha ocurrido un error inesperado, vuelva a intentarlo!",position:"topRight",displayMode:1}),setTimeout(()=>{o.value="Actualizar",o.disabled=!1},1e3)}}(l)})}if(t){document.querySelectorAll("#eliminar-arancel").forEach(e=>{e.addEventListener("click",()=>{Swal.fire({title:"¿Estas Seguro?",text:"¿Estas seguro que quieres borrar este registro?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si!",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&async function(e,t){const a=document.querySelector("#body-arancel"),o=new FormData;o.append("id",e);try{const e=window.location.origin+"/api/eliminar-arancel",r=await fetch(e,{method:"POST",body:o});"exito"===(await r.json()).resultado&&(Swal.fire({position:"center",icon:"success",title:"Dato borrado con exito!",showConfirmButton:!1,timer:2e3}),a.removeChild(t))}catch(e){iziToast.error({title:"Oppsss!",message:"Ha ocurrido un error, intentelo nuevamente!",position:"topRight",timeout:2e3}),console.log(e)}}(e.dataset.id,e.parentNode.parentElement.parentElement)})})})}}();