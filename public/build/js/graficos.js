!function(){const a=document.getElementById("general"),e=document.querySelector("#categorias"),t=document.querySelector("#bolivares"),o=document.querySelector("#select-categoria"),n=document.querySelector("#categoria-bolivares"),l=document.querySelector("#anio-general");l.addEventListener("change",a=>{u(a.target.value)});const s=document.querySelector("#btn-actualizar"),i=document.querySelector("#tasa-input");i.addEventListener("input",a=>{a.target.value.length>7&&(a.target.value=a.target.value.slice(0,8),a.preventDefault())}),s.addEventListener("click",()=>{i.value.length<7?iziToast.error({title:"El campo no debe ir vacio!",position:"topRight"}):async function(a){const e=a.toFixed(4),t=new FormData;t.append("tasa",e),document.querySelector("#btn-actualizar").disabled=!0,document.querySelector("#btn-actualizar").textContent="Actualizando...";try{const a=window.location.origin+"/api/aranceles/actualizar-tasa",o=await fetch(a,{method:"POST",body:t}),n=await o.json();"exito"===n.resultado&&iziToast.success({title:"Tasa Actualizada!",position:"topRight"}),document.querySelector("#tasa").textContent=e,document.querySelector("#fecha").textContent=n.fecha,$("#staticBackdrop").modal("hide"),setTimeout(()=>{document.querySelector("#btn-actualizar").disabled=!1,document.querySelector("#btn-actualizar").textContent="Actualizar"},2e3)}catch(a){console.log(a)}}(parseFloat(i.value))}),g(n.value),n.addEventListener("change",a=>{g(a.target.value)}),p(o.value),o.addEventListener("change",a=>{p(a.target.value)});const c=new Chart(a,{type:"bar",data:{labels:[],datasets:[{label:"",data:[],borderWidth:1}]},options:{scales:{x:{display:!0,scaleLabel:{display:!0,labelString:"Mes"}},y:{display:!0,scaleLabel:{display:!0,labelString:"NÂº de Aranceles"}}}}}),d=new Chart(t,{data:{datasets:[{type:"line",label:"Monto en Bolivares",data:[200,100,500],tension:.5,fill:!0}],labels:["Febrero","Marzo","Abril"]},options:{plugins:{legend:{display:!1},title:{display:!0,text:"Balance por Mes",font:{size:20,weight:"bolder"},padding:{bottom:30}}}}}),r=new Chart(e,{data:{datasets:[{type:"doughnut",data:[3,2,1],label:"documento"}],labels:["Febrero","Marzo","Abril"]},options:{plugins:{legend:{display:!1},title:{display:!0,text:"Aranceles por Mes",font:{size:20,weight:"bolder"},padding:{bottom:30}}}}});async function u(a){const e=new FormData;e.append("dato",a??"");try{const a=window.location.origin+"/api/aranceles/meses",t=await fetch(a,{method:"POST",body:e}),o=await t.json();c.data.labels=o.datos.map(a=>a.mes??"Sin Datos"),c.data.datasets[0].data=o.datos.map(a=>a.cantidad??0),c.data.datasets[0].label="Solicitudes de Aranceles por mes - "+o.anio,c.update()}catch(a){console.log(a)}}async function p(a){const e=new FormData;e.append("categoria",a);try{const a=window.location.origin+"/api/aranceles/meses-categoria",t=await fetch(a,{method:"POST",body:e}),o=await t.json();r.data.labels=o.datos.map(a=>a.fecha??"no hay datos"),r.data.datasets[0].data=o.datos.map(a=>a.total??0),r.update()}catch(a){console.log(a)}}async function g(a){const e=new FormData;e.append("categoria",a);try{const a=window.location.origin+"/api/aranceles/meses-bolivares",t=await fetch(a,{body:e,method:"POST"}),o=await t.json();d.data.labels=o.map(a=>a.fecha),d.data.datasets[0].data=o.map(a=>a.total??0),d.update()}catch(a){console.log(a)}}u(l.value)}();